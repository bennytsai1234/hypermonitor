# 🚀 Hyperliquid 雲端監控系統指南

本系統已成功升級為 **「雲端同步版」**。你的 Windows 電腦現在擔任「數據中心」，而手機 App 則是你的「移動監視器」。

---

## 🛠️ 系統組件說明

1. **發報機 (Windows App)**:
   - 負責每 10 秒抓取 Coinglass 最新的數據。
   - 自動將數據 `POST` 同步至 Cloudflare 雲端資料庫。
   - **注意**: 必須開啟此 App，雲端數據才會持續累積。

2. **中繼站 (Cloudflare Worker + D1)**:
   - **永久儲存**: 負責儲存 1 小時到 1 年的所有歷史數據。
   - **智能聚合**: 當查詢長週期（如 1M）時，會自動壓縮數據以提升 App 效能。
   - **API 網址**: `https://hyper-monitor-worker.bennytsai0711.workers.dev`

3. **接收機 (Mobile/Tablet App)**:
   - 每 10 秒向雲端索取最新數據。
   - 支援 1H / 1D / 1W / 1M / 1Y 全週期趨勢圖切換。

---

## 📱 手機端部署步驟

### 1. 編譯安裝包
在終端機執行以下指令來產生手機安裝檔：

**Android (APK):**
```powershell
flutter build apk --release
```
*產物路徑: `build/app/outputs/flutter-apk/app-release.apk`*

**iOS (需在 Mac 執行):**
```bash
flutter build ipa
```

### 2. 資料同步驗證
- 在手機打開 App 後，觀察頂部標題是否顯示 **"HYPER MONITOR CLOUD"**。
- 若看到「雲端更新：HH:mm:ss」，代表手機已成功連上你的 Cloudflare 後端。

---

## ☁️ 雲端後端維護 (Cloudflare)

如果你未來想清理資料庫或檢查日誌，請進入 `worker` 目錄：

- **查看即時日誌**:
  `npx wrangler tail`
- **手動查詢資料庫**:
  `npx wrangler d1 execute hyper_db --remote --command "SELECT count(*) FROM printer_metrics"`
- **重新部署代碼**:
  `npx wrangler deploy`

---

## 📈 趨勢維度對照表

| 選項 | 數據精細度 (聚合) | 適合用途 |
| :--- | :--- | :--- |
| **1H - 3H** | 每 1 分鐘一筆 | 捕捉短線爆發、插針。 |
| **1D - 5D** | 每 5~30 分鐘一筆 | 觀察日內資金流向。 |
| **1W - 1M** | 每 1~4 小時一筆 | 判斷週線、月線級趨勢。 |
| **1Y** | 每 24 小時一筆 | 宏觀牛熊分析。 |

---

## ⚠️ 常見問題 (FAQ)

**Q: 為什麼圖表顯示「無數據」？**
A: 因為數據是從你部署完後才開始累積的。請讓 Windows 端 App 跑一段時間，資料就會自動長出來。

**Q: 數據會被 Coinglass 封鎖嗎？**
A: 由於我們是用你的 Windows App 進行抓取（真人家用 IP），這比直接用伺服器抓取安全 100 倍，基本上不會被封鎖。

---
*Generated by Gemini CLI Agent - 2026-02-08*
